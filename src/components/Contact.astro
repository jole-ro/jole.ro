---
const { lang = "en" } = Astro.props;

const content = {
  en: {
    title: "Propel Your Business with Elite Digital Expertise",
    name: "Business Entity (Optional)",
    person: "Full Name",
    email: "Professional Email (Optional)",
    phone: "Contact Number (Optional)",
    message: "How can we assist your expansion?",
    send: "Send Strategic Inquiry",
    sending: "Transmitting...",
    success:
      "Your message has been received. Our consultants will contact you shortly.",
    error: "Transmission error. Please attempt again.",
    privacyPath: "/privacy",
    privacy: "Privacy Policy",
    consent: "I acknowledge the processing of my data in accordance with the",
    benefits: [
      {
        icon: "ğŸ¯",
        title: "High-Level Bespoke Strategy",
        desc: "Receive a rigorous growth plan designed to consolidate your position as a local market leader.",
      },
      {
        icon: "âš¡",
        title: "Professional Excellence",
        desc: "We respect your time and provide a high-level consultative response within 24 hours.",
      },
      {
        icon: "ğŸ”",
        title: "Expertise Audit",
        desc: "Benefit from an in-depth analysis of your digital presence, powered by state-of-the-art AI technology.",
      },
      {
        icon: "ğŸ› ï¸",
        title: "Strategic Results",
        desc: "We focus on high-impact optimizations that categorically differentiate your business from the competition.",
      },
    ],
  },
  hu: {
    title: "SkÃ¡lÃ¡zza vÃ¡llalkozÃ¡sÃ¡t elit digitÃ¡lis szakÃ©rtelemmel",
    name: "VÃ¡llalkozÃ¡s neve (OpcionÃ¡lis)",
    person: "Teljes nÃ©v",
    email: "Szakmai e-mail (OpcionÃ¡lis)",
    phone: "TelefonszÃ¡m (OpcionÃ¡lis)",
    message: "Hogyan segÃ­thetjÃ¼k a terjeszkedÃ©sÃ©t?",
    send: "StratÃ©giai megkeresÃ©s kÃ¼ldÃ©se",
    sending: "KÃ¼ldÃ©s folyamatban...",
    success:
      "ÃœzenetÃ©t megkaptuk. TanÃ¡csadÃ³ink hamarosan felveszik Ã–nnel a kapcsolatot.",
    error: "Hiba tÃ¶rtÃ©nt a kÃ¼ldÃ©s sorÃ¡n. KÃ©rjÃ¼k, prÃ³bÃ¡lja Ãºjra.",
    privacyPath: "/hu/privacy",
    privacy: "adatkezelÃ©si tÃ¡jÃ©koztatÃ³ban",
    consent: "HozzÃ¡jÃ¡rulok az adataim kezelÃ©sÃ©hez az",
    benefits: [
      {
        icon: "ğŸ¯",
        title: "Magas szintÅ± egyedi stratÃ©gia",
        desc: "SzigorÃº nÃ¶vekedÃ©si tervet kap, amelynek cÃ©lja a helyi piaci vezetÅ‘ szerepÃ©nek megerÅ‘sÃ­tÃ©se.",
      },
      {
        icon: "âš¡",
        title: "Szakmai kivÃ¡lÃ³sÃ¡g",
        desc: "TiszteljÃ¼k az idejÃ©t, Ã©s 24 Ã³rÃ¡n belÃ¼l magas szintÅ± tanÃ¡csadÃ³i vÃ¡laszt adunk.",
      },
      {
        icon: "ğŸ”",
        title: "SzakÃ©rtÅ‘i audit",
        desc: "RÃ©szletes elemzÃ©st kap digitÃ¡lis jelenlÃ©tÃ©rÅ‘l, a legmodernebb AI technolÃ³gia tÃ¡mogatÃ¡sÃ¡val.",
      },
      {
        icon: "ğŸ› ï¸",
        title: "StratÃ©giai eredmÃ©nyek",
        desc: "Nagy hatÃ¡sÃº optimalizÃ¡lÃ¡sokra Ã¶sszpontosÃ­tunk, amelyek kategorikusan megkÃ¼lÃ¶nbÃ¶ztetik vÃ¡llalkozÃ¡sÃ¡t.",
      },
    ],
  },
  ro: {
    title: "PropulseazÄƒ-È›i afacerea cu expertizÄƒ digitalÄƒ de elitÄƒ",
    name: "Entitate Business (OpÈ›ional)",
    person: "Nume Complet",
    email: "Email Profesional (OpÈ›ional)",
    phone: "NumÄƒr de Contact (OpÈ›ional)",
    message: "Cum putem asista expansiunea dumneavoastrÄƒ?",
    send: "Trimite Solicitare StrategicÄƒ",
    sending: "Se transmite...",
    success:
      "Mesajul a fost recepÈ›ionat. ConsultanÈ›ii noÈ™tri vÄƒ vor contacta Ã®n cel mai scurt timp.",
    error: "Eroare la transmitere. VÄƒ rugÄƒm sÄƒ reÃ®ncercaÈ›i.",
    privacyPath: "/ro/privacy",
    privacy: "politica de confidenÈ›ialitate",
    consent: "Sunt de acord cu prelucrarea datelor mele conform cu",
    benefits: [
      {
        icon: "ğŸ¯",
        title: "Strategie PersonalizatÄƒ de Ãnalt Nivel",
        desc: "PrimeÈ™ti un plan de expansiune riguros, conceput pentru a-È›i consolida poziÈ›ia de lider pe piaÈ›a localÄƒ.",
      },
      {
        icon: "âš¡",
        title: "ExcelenÈ›Äƒ ProfesionalÄƒ",
        desc: "VÄƒ respectÄƒm timpul È™i garantÄƒm un rÄƒspuns consultativ de Ã®nalt nivel Ã®n termen de 24 de ore.",
      },
      {
        icon: "ğŸ”",
        title: "Audit de ExpertizÄƒ",
        desc: "Beneficiezi de o analizÄƒ aprofundatÄƒ a prezenÈ›ei tale digitale, bazatÄƒ pe tehnologia AI de ultimÄƒ generaÈ›ie.",
      },
      {
        icon: "ğŸ› ï¸",
        title: "Rezultate Strategice",
        desc: "Ne concentrÄƒm pe optimizÄƒri cu impact major care sÄƒ Ã®È›i diferenÈ›ieze afacerea Ã®n mod categoric.",
      },
    ],
  },
};

const t = content[lang as keyof typeof content] || content.en;
---

<section id="contact" class="py-24 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900">{t.title}</h2>
    </div>

    <div class="grid lg:grid-cols-5 gap-12 items-start">
      <!-- Contact Form -->
      <div class="lg:col-span-3">
        <form class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100">
          <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >{t.person}</label
              >
              <input
                type="text"
                name="name"
                class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-shadow"
                required
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >{t.name}</label
              >
              <input
                type="text"
                name="businessName"
                class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-shadow"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >{t.email}</label
              >
              <input
                type="email"
                id="contact-email"
                name="email"
                class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-shadow"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >{t.phone}</label
              >
              <input
                type="tel"
                id="contact-phone"
                name="phone"
                class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-shadow"
              />
            </div>
          </div>
          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >{t.message}</label
            >
            <textarea
              name="message"
              class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-shadow"
              rows="4"
              required></textarea>
          </div>

          <div class="mb-8 flex items-start gap-3">
            <input
              type="checkbox"
              id="gdpr-consent"
              name="consent"
              value="true"
              required
              class="mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary cursor-pointer"
            />
            <label
              for="gdpr-consent"
              class="text-sm text-gray-600 leading-tight"
            >
              {t.consent}
              <a
                href={t.privacyPath}
                class="text-primary hover:underline font-medium">{t.privacy}</a
              >.
            </label>
          </div>

          <button
            type="submit"
            id="submit-btn"
            class="w-full bg-primary text-white py-4 rounded-xl hover:bg-primary-hover cursor-pointer font-semibold shadow-lg shadow-primary/20 transition-all hover:-translate-y-1 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <span id="submit-text">{t.send}</span>
          </button>
        </form>
      </div>

      <!-- Sidebar Benefits -->
      <div class="lg:col-span-2 space-y-8">
        {
          t.benefits.map((benefit) => (
            <div class="flex gap-4">
              <div class="flex-shrink-0 w-12 h-12 bg-white rounded-xl shadow-sm border border-gray-100 flex items-center justify-center text-2xl">
                {benefit.icon}
              </div>
              <div>
                <h3 class="text-lg font-bold text-gray-900 mb-1">
                  {benefit.title}
                </h3>
                <p class="text-gray-600 leading-relaxed text-sm">
                  {benefit.desc}
                </p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<script>
  const form = document.querySelector("form");
  const submitBtn = document.getElementById("submit-btn") as HTMLButtonElement;
  const submitText = document.getElementById("submit-text");

  if (form && submitBtn && submitText) {
    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const emailInput = document.getElementById(
        "contact-email",
      ) as HTMLInputElement;
      const phoneInput = document.getElementById(
        "contact-phone",
      ) as HTMLInputElement;

      // Check if at least email or phone is provided
      if (!emailInput.value && !phoneInput.value) {
        alert(
          document.documentElement.lang === "hu"
            ? "KÃ©rjÃ¼k, adja meg az e-mail cÃ­mÃ©t vagy a telefonszÃ¡mÃ¡t!"
            : document.documentElement.lang === "ro"
              ? "VÄƒ rugÄƒm sÄƒ furnizaÈ›i o adresÄƒ de e-mail sau un numÄƒr de telefon!"
              : "Please provide either an email or a phone number!",
        );
        return;
      }

      // Disable submit button and show loading state
      submitBtn.disabled = true;
      const originalText = submitText.textContent;
      submitText.textContent =
        document.documentElement.lang === "hu"
          ? "KÃ¼ldÃ©s..."
          : document.documentElement.lang === "ro"
            ? "Se trimite..."
            : "Sending...";

      try {
        const formData = new FormData(form);
        const data = Object.fromEntries(formData);

        const response = await fetch("https://submit-form.com/41PA1XYWP", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Accept: "application/json",
          },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          // Show success message
          const successMessage = document.createElement("div");
          successMessage.className =
            "fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded shadow-lg z-50";
          successMessage.textContent =
            document.documentElement.lang === "hu"
              ? "KÃ¶szÃ¶njÃ¼k az Ã¼zenetet. Hamarosan vÃ¡laszolunk!"
              : document.documentElement.lang === "ro"
                ? "VÄƒ mulÈ›umim pentru mesaj. VÄƒ vom rÄƒspunde Ã®n curÃ¢nd!"
                : "Thank you for your message. We'll get back to you soon!";
          document.body.appendChild(successMessage);

          setTimeout(() => {
            successMessage.remove();
          }, 5000);

          form.reset();
        } else {
          throw new Error("Failed to send message");
        }
      } catch (error) {
        // Show error message
        const errorMessage = document.createElement("div");
        errorMessage.className =
          "fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded shadow-lg z-50";
        errorMessage.textContent =
          document.documentElement.lang === "hu"
            ? "Nem sikerÃ¼lt elkÃ¼ldeni az Ã¼zenetet. KÃ©rjÃ¼k, prÃ³bÃ¡lja Ãºjra."
            : document.documentElement.lang === "ro"
              ? "Trimiterea mesajului a eÈ™uat. VÄƒ rugÄƒm sÄƒ Ã®ncercaÈ›i din nou."
              : "Failed to send message. Please try again.";
        document.body.appendChild(errorMessage);

        setTimeout(() => {
          errorMessage.remove();
        }, 5000);

        console.error("Form submission error:", error);
      } finally {
        // Re-enable submit button
        submitBtn.disabled = false;
        submitText.textContent = originalText;
      }
    });
  }
</script>
